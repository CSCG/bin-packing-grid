!function(){"use strict";function a(a,b){return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)}function b(a){return a.map(function(a){return a.slice(0)})}function c(a,c,d,e,f,g){var i,j;if(c+f>g)return!1;for(a=b(a),j=d;d+e>j;j+=1)for(void 0===a[j]&&(a[j]=h()),i=c;c+f>i;i+=1){if(1===a[j][i])return!1;a[j][i]=1}return a}function d(a,b){var d,e;e=[h()],d=Array.prototype.slice.call(a,0),d.forEach(function(a){var d,f,g,h,i,j,k=[];for(d=0;d<e.length;d+=1)for(f=0;f<b.columns;f+=1)if(0===e[d][f]&&(g=c(e,f,d,a.rows,a.cols,b.columns),g!==!1)){j=e[d].indexOf(1,f),k.push({grid:g,left:e[d].slice(f,j),y:d,x:f});break}return k.length>0?(k.sort(function(a,b){return a.x>b.x?-1:a.x<b.x?1:a.y<b.y?-1:a.y>b.y?1:0}),i=k.shift(),a.item.left=(b.cellSize+b.gutterSize)*i.x,a.item.top=(b.cellSize+b.gutterSize)*i.y,void(e=i.grid)):(h=e.length,g=c(e,0,e.length,a.rows,a.cols,b.columns),e=g,a.item.top=(b.cellSize+b.gutterSize)*h,void(a.item.left=0))})}function e(b){var c;b.style.width="auto",window.requestAnimationFrame(function(){c=parseInt(a(b,"width"),10),b.columns=Math.floor(c/(b.cellSize+b.gutterSize)),h=function(){return Array.apply(0,Array.call(0,b.columns)).map(function(){return 0})},b.style.width=b.columns*(b.cellSize+b.gutterSize)-b.gutterSize+"px",d(b.elements,b)})}var f,g,h,i;f=Function.prototype.call.bind(Array.prototype.forEach),g=Function.prototype.call.bind(Array.prototype.map),Polymer("bin-packing-grid",{cellSize:100,gutterSize:5,created:function(){this.elements=this.elements||[]},init:function(){var a,b=this;a=this.getElementsByTagName("bin-packing-item"),this.elements=g(a,function(a){var b,c;return b=parseInt(a.cols,10),c=parseInt(a.rows,10),{area:b*c,cols:b,rows:c,item:a}}),f(a,function(a){var c=b.cellSize+b.gutterSize;a.style.width=a.cols*c-b.gutterSize+"px",a.style.height=a.rows*c-b.gutterSize+"px"}),i&&window.removeEventListener("resize",i),i=e.bind(0,b),window.addEventListener("resize",i),i()},ready:function(){this.init()}})}();