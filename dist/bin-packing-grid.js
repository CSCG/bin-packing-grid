!function(){"use strict";function a(a,b){return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)}function b(a){return a.map(function(a){return a.slice(0)})}function c(a,c,d,e,f,h){var i,j;if(c+f>h)return!1;for(a=b(a),j=d;d+e>j;j+=1)for(void 0===a[j]&&(a[j]=g()),i=c;c+f>i;i+=1){if(1===a[j][i])return!1;a[j][i]=1}return a}function d(a,b){var d,e;e=[g()],d=Array.prototype.slice.call(a,0),d.forEach(function(a){var d,f,g,h,i,j,k=[];for(d=0;d<e.length;d+=1)for(f=0;f<b.columns;f+=1)if(0===e[d][f]&&(g=c(e,f,d,a.rows,a.cols,b.columns),g!==!1)){j=e[d].indexOf(1,f),k.push({grid:g,left:e[d].slice(f,j),y:d,x:f});break}return k.length>0?(k.sort(function(a,b){return a.grid.length<b.grid.length?-1:a.grid.length>b.grid.length?1:a.y<b.y?-1:a.y>b.y?1:a.x>b.x?-1:a.x<b.x?1:0}),i=k.shift(),a.item.setAttribute("top",i.y),a.item.setAttribute("left",i.x),void(e=i.grid)):(h=e.length,g=c(e,0,e.length,a.rows,a.cols,b.columns),e=g,a.item.setAttribute("top",h),void a.item.setAttribute("left",0))})}function e(b){var c;b.style.width="auto",window.requestAnimationFrame(function(){c=parseInt(a(b,"width"),10),b.columns=Math.floor(c/(b.cellSize+b.gutterSize)),g=function(){return Array.apply(0,Array.call(0,b.columns)).map(function(){return 0})},b.style.width=b.columns*(b.cellSize+b.gutterSize)-b.gutterSize+"px",d(b.elements,b)})}var f,g,h;f=Function.prototype.call.bind(Array.prototype.map),Polymer({is:"bin-packing-grid",properties:{cellSize:{type:Number,value:100},gutterSize:{type:Number,value:5}},created:function(){this.elements=this.elements||[]},init:function(){var a,b=this;a=Polymer.dom(this).querySelectorAll("bin-packing-item"),this.elements=f(a,function(a){var b,c;return b=parseInt(a.getAttribute("cols"),10),c=parseInt(a.getAttribute("rows"),10),{area:b*c,cols:b,rows:c,item:a}}),h&&window.removeEventListener("resize",h),h=e.bind(0,b),window.addEventListener("resize",h),h()},ready:function(){this.init()}})}();